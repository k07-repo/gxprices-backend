(this["webpackJsonpgx-frontend"]=this["webpackJsonpgx-frontend"]||[]).push([[0],{19:function(e,t,n){e.exports=n(43)},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(17),l=n.n(c),u=(n(4),n(6),n(2)),o=n(3),i=n.n(o),m="http://localhost:3001/products",s={getAll:function(){return i.a.get(m)},getAllFromSet:function(e){return i.a.get(m+"/group/"+e)}},d=function(){return i.a.get("http://localhost:3001/groups")},p=function(){return i.a.get("http://localhost:3001/meta")},E=n(18),f=(n(42),function(e){var t=e.product,n=e.handleClose,r=e.show?"modal display-block":"modal display-none";return a.a.createElement("div",{className:r},a.a.createElement("section",{className:"modal-main"},a.a.createElement("div",null,a.a.createElement("table",null,a.a.createElement("tr",null,a.a.createElement("td",{rowspan:"3"},a.a.createElement("div",{class:"product-image"},a.a.createElement("img",{src:t.imageUrl}))),a.a.createElement("td",null,a.a.createElement("div",{class:"product-name"},t.name),a.a.createElement("div",{class:"product-info"},t.group?t.group.groupName:"Set Name Not Found"),a.a.createElement("div",{class:"product-info"},t.cardNumber),a.a.createElement("div",{class:"product-info"},t.cardRarity))),a.a.createElement("tr",null,a.a.createElement("div",{class:"product-info"},"Market Price: ",t.currentMarketPrice)),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("a",{href:t.storeUrl},"TCGPlayer prices"))))),a.a.createElement("button",{onClick:n},"close")))}),b=function(e){var t=e.products,n=Object(r.useState)({key:"cardNumber",direction:"ascending"}),c=Object(u.a)(n,2),l=c[0],o=c[1],i=Object(r.useState)(!1),m=Object(u.a)(i,2),s=m[0],d=m[1],p=Object(r.useState)({}),b=Object(u.a)(p,2),g=b[0],k=b[1],v=function(e){var t="ascending";l.key===e&&"ascending"===l.direction&&(t="descending"),o({key:e,direction:t})},h=function(e){var t=e.product,n=(t.currentMarketPrice-t.previousMarketPrice).toFixed(2),r="black";return n<0?r="red":n>0&&(r="green",n="+"+n),a.a.createElement("font",{color:r},n)},y=function(e){var t=e.product,n=((t.currentMarketPrice-t.previousMarketPrice)/t.previousMarketPrice*100).toFixed(2),r="black";return n<0?r="red":n>0&&(r="green",n="+"+n),a.a.createElement("font",{color:r},n,"%")},j=Object(E.a)(t);if(null!==l){var O=null,P=null;j.sort((function(e,t){if("difference"===l.key?(O=e.currentMarketPrice-e.previousMarketPrice,P=t.currentMarketPrice-t.previousMarketPrice):"percentDifference"===l.key?(O=(e.currentMarketPrice-e.previousMarketPrice)/e.previousMarketPrice,P=(t.currentMarketPrice-t.previousMarketPrice)/t.previousMarketPrice):(O=e[l.key],P=t[l.key]),null===O)return 1;if(null===P)return-1;var n=function(e,t){return"string"===typeof e&&"string"===typeof t?e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"}):e>t?1:e<t?-1:0}(O,P);return n<0?"ascending"===l.direction?-1:1:n>0?"ascending"===l.direction?1:-1:0}))}return a.a.createElement("div",null,a.a.createElement(f,{product:g,show:s,handleClose:function(){d(!1)}}),a.a.createElement("table",{class:"price-list-table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,a.a.createElement("button",{type:"button",onClick:function(){return v("name")}},"Name")),a.a.createElement("th",null,a.a.createElement("button",{type:"button",onClick:function(){return v("cardNumber")}},"Number")),a.a.createElement("th",null,a.a.createElement("button",{type:"button",onClick:function(){return v("currentMarketPrice")}},"Price")),a.a.createElement("th",null,a.a.createElement("button",{type:"button",onClick:function(){return v("difference")}},"Week Change")),a.a.createElement("th",null,a.a.createElement("button",{type:"button",onClick:function(){return v("percentDifference")}},"Week Change (%)")))),a.a.createElement("tbody",null,j.map((function(e){return a.a.createElement("tr",{key:e.productId},a.a.createElement("td",null,a.a.createElement("button",{onClick:function(){k(e),d(!0)}},e.name)),a.a.createElement("td",null,e.cardNumber),a.a.createElement("td",null,e.currentMarketPrice),a.a.createElement("td",null,a.a.createElement(h,{product:e})),a.a.createElement("td",null,a.a.createElement(y,{product:e})))})))))},g=function(e,t){return e.groupName<t.groupName?-1:e.groupName>t.groupName?1:0},k=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)([]),o=Object(u.a)(l,2),i=(o[0],o[1],Object(r.useState)(0)),m=Object(u.a)(i,2),E=(m[0],m[1]),f=Object(r.useState)([]),k=Object(u.a)(f,2),v=k[0],h=k[1],y=Object(r.useState)(""),j=Object(u.a)(y,2),O=(j[0],j[1],Object(r.useState)("")),P=Object(u.a)(O,2),M=(P[0],P[1],Object(r.useState)(null)),N=Object(u.a)(M,2),C=N[0],S=(N[1],Object(r.useState)(null)),w=Object(u.a)(S,2),x=w[0],A=w[1],F=function(e){console.log(e),0==e?(console.log("getting all"),s.getAll().then((function(e){c(e.data)}))):s.getAllFromSet(e).then((function(e){c(e.data)}))};Object(r.useEffect)((function(){F(2594),d().then((function(e){h(e.data.sort(g))})),p().then((function(e){return A(e.data.lastUpdated)}))}),[]);for(var I=0;I<n.length;I++)n[I].currentMarketPrice;return a.a.createElement("div",{align:"center"},a.a.createElement("h1",null,"Current Market Prices"),a.a.createElement("div",null,"Last updated: ",x),null!==C&&a.a.createElement("br",null),a.a.createElement("select",{id:"set-selector",name:"sets",onChange:function(e){return t=e.target.value,E(t),F(t),void(document.getElementById("set-selector").value=t);var t}},v.map((function(e){return a.a.createElement("option",{value:e.groupId,key:e.groupId},e.groupName)})),a.a.createElement("option",{value:0,key:0},"All cards (slow!)")),a.a.createElement(b,{products:n}))};l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(k,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.d9a6d299.chunk.js.map